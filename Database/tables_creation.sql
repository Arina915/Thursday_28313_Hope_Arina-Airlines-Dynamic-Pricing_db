-- PHASE IV: Database Creation Script
-- Student: Arinatwe Hope
-- Date: December 2025
-- =================================================================
-- create table aircraft
CREATE TABLE "ADMIN_28313"."AIRCRAFT" 
   (	"AIRCRAFT_ID" VARCHAR2(10 BYTE), 
	"REGISTRATION_NO" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"AIRCRAFT_TYPE" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"MANUFACTURER" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"CAPACITY" NUMBER(3,0) NOT NULL ENABLE, 
	"PURCHASE_DATE" DATE NOT NULL ENABLE, 
	"LAST_MAINTENANCE" DATE, 
	"STATUS" VARCHAR2(20 BYTE) DEFAULT 'ACTIVE', 
	 CHECK (capacity > 0) ENABLE, 
	 CHECK (status IN ('ACTIVE', 'MAINTENANCE', 'RETIRED')) ENABLE, 
	 PRIMARY KEY ("AIRCRAFT_ID");

-- create table airport
CREATE TABLE "ADMIN_28313"."AIRPORTS" 
   (	"AIRPORT_ID" VARCHAR2(3 BYTE), 
	"AIRPORT_NAME" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"CITY" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"COUNTRY" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"HUB_STATUS" VARCHAR2(10 BYTE), 
	"TIMEZONE" VARCHAR2(50 BYTE) DEFAULT 'GMT+3', 
	"CREATED_DATE" DATE DEFAULT SYSDATE, 
	 CHECK (hub_status IN ('MAIN', 'REGIONAL', 'NONE')) ENABLE, 
	 PRIMARY KEY ("AIRPORT_ID");

-- create table booking
CREATE TABLE "ADMIN_28313"."BOOKINGS" 
   (	"BOOKING_ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"CUSTOMER_ID" NUMBER NOT NULL ENABLE, 
	"FLIGHT_ID" VARCHAR2(10 BYTE) NOT NULL ENABLE, 
	"BOOKING_DATE" TIMESTAMP (6) DEFAULT SYSTIMESTAMP NOT NULL ENABLE, 
	"TRAVEL_DATE" DATE NOT NULL ENABLE, 
	"FARE_CLASS" VARCHAR2(2 BYTE) NOT NULL ENABLE, 
	"SEAT_NUMBER" VARCHAR2(5 BYTE), 
	"TICKET_PRICE" NUMBER(10,2) NOT NULL ENABLE, 
	"PAYMENT_STATUS" VARCHAR2(20 BYTE) DEFAULT 'PENDING', 
	"BOOKING_STATUS" VARCHAR2(20 BYTE) DEFAULT 'CONFIRMED', 
	"CANCELLATION_DATE" DATE, 
	"NO_SHOW_REASON" VARCHAR2(100 BYTE), 
	 CHECK (fare_class IN ('F', 'B', 'E', 'K')) ENABLE, 
	 CHECK (ticket_price > 0) ENABLE, 
	 CHECK (payment_status IN ('PENDING', 'PAID', 'REFUNDED', 'CANCELLED')) ENABLE, 
	 CHECK (booking_status IN ('CONFIRMED', 'CANCELLED', 'NOSHOW', 'CHECKEDIN')) ENABLE, 
	 PRIMARY KEY ("BOOKING_ID");

-- create table customers
CREATE TABLE "ADMIN_28313"."CUSTOMERS" 
   (	"CUSTOMER_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"FIRST_NAME" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"LAST_NAME" VARCHAR2(50 BYTE) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"PHONE" VARCHAR2(20 BYTE), 
	"DATE_OF_BIRTH" DATE, 
	"LOYALTY_LEVEL" VARCHAR2(20 BYTE) DEFAULT 'STANDARD', 
	"LOYALTY_POINTS" NUMBER DEFAULT 0, 
	"JOIN_DATE" DATE DEFAULT SYSDATE, 
	"HOME_AIRPORT" VARCHAR2(3 BYTE), 
	"TOTAL_FLIGHTS" NUMBER DEFAULT 0, 
	"NO_SHOW_COUNT" NUMBER DEFAULT 0, 
	 CHECK (loyalty_level IN ('STANDARD', 'SILVER', 'GOLD', 'PLATINUM')) ENABLE, 
	 PRIMARY KEY ("CUSTOMER_ID");

-- create table flight_schedule
CREATE TABLE "ADMIN_28313"."FLIGHT_SCHEDULE" 
   (	"FLIGHT_ID" VARCHAR2(10 BYTE), 
	"FLIGHT_NO" VARCHAR2(6 BYTE) NOT NULL ENABLE, 
	"DEPARTURE_AIRPORT" VARCHAR2(3 BYTE) NOT NULL ENABLE, 
	"ARRIVAL_AIRPORT" VARCHAR2(3 BYTE) NOT NULL ENABLE, 
	"DEPARTURE_TIME" TIMESTAMP (6) NOT NULL ENABLE, 
	"ARRIVAL_TIME" TIMESTAMP (6) NOT NULL ENABLE, 
	"AIRCRAFT_ID" VARCHAR2(10 BYTE) NOT NULL ENABLE, 
	"FLIGHT_DURATION" INTERVAL DAY (2) TO SECOND (6), 
	"DAY_OF_WEEK" VARCHAR2(15 BYTE), 
	"IS_ACTIVE" CHAR(1 BYTE) DEFAULT 'Y', 
	 CHECK (is_active IN ('Y', 'N')) ENABLE, 
	 CONSTRAINT "CHK_TIMES" CHECK (arrival_time > departure_time) ENABLE, 
	 PRIMARY KEY ("FLIGHT_ID");

-- create table holidays
CREATE TABLE "ADMIN_28313"."HOLIDAYS" 
   (	"HOLIDAY_ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"HOLIDAY_DATE" DATE NOT NULL ENABLE, 
	"HOLIDAY_NAME" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"COUNTRY" VARCHAR2(50 BYTE) DEFAULT 'Kenya', 
	"IS_PUBLIC_HOLIDAY" CHAR(1 BYTE) DEFAULT 'Y', 
	"YEAR_MONTH" VARCHAR2(7 BYTE), 
	 CHECK (is_public_holiday IN ('Y', 'N')) ENABLE, 
	 PRIMARY KEY ("HOLIDAY_ID");

-- create table no_show_forecast

  CREATE TABLE "ADMIN_28313"."NO_SHOW_FORECAST" 
   (	"FORECAST_ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"FLIGHT_ID" VARCHAR2(10 BYTE) NOT NULL ENABLE, 
	"FORECAST_DATE" DATE NOT NULL ENABLE, 
	"TRAVEL_DATE" DATE NOT NULL ENABLE, 
	"PREDICTED_NO_SHOWS" NUMBER(3,0) NOT NULL ENABLE, 
	"PREDICTION_CONFIDENCE" NUMBER(5,2), 
	"ACTUAL_NO_SHOWS" NUMBER(3,0), 
	"FORECAST_ACCURACY" NUMBER(5,2), 
	"MODEL_VERSION" VARCHAR2(20 BYTE), 
	 CHECK (prediction_confidence BETWEEN 0 AND 100) ENABLE, 
	 PRIMARY KEY ("FORECAST_ID");

-- create table price_adjustments
CREATE TABLE "ADMIN_28313"."PRICE_ADJUSTMENTS" 
   (	"ADJUSTMENT_ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"FLIGHT_ID" VARCHAR2(10 BYTE), 
	"FARE_CLASS" VARCHAR2(20 BYTE), 
	"OLD_PRICE" NUMBER(10,2), 
	"NEW_PRICE" NUMBER(10,2), 
	"PRICE_DIFFERENCE" NUMBER(10,2), 
	"ADJUSTMENT_REASON" VARCHAR2(200 BYTE), 
	"ADJUSTED_BY" VARCHAR2(50 BYTE) DEFAULT 'SYSTEM', 
	"ADJUSTED_DATE" TIMESTAMP (6) DEFAULT SYSTIMESTAMP, 
	 PRIMARY KEY ("ADJUSTMENT_ID");

-- create table price_rules

  CREATE TABLE "ADMIN_28313"."PRICE_RULES" 
   (	"RULE_ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"RULE_NAME" VARCHAR2(100 BYTE) NOT NULL ENABLE, 
	"FARE_CLASS" VARCHAR2(2 BYTE) NOT NULL ENABLE, 
	"BASE_PRICE" NUMBER(10,2) NOT NULL ENABLE, 
	"DEMAND_MULTIPLIER" NUMBER(5,2) DEFAULT 1.0, 
	"CAPACITY_THRESHOLD" NUMBER(3,0) DEFAULT 80, 
	"DAYS_BEFORE_DEPARTURE" NUMBER(3,0), 
	"MIN_PRICE" NUMBER(10,2), 
	"MAX_PRICE" NUMBER(10,2), 
	"IS_ACTIVE" CHAR(1 BYTE) DEFAULT 'Y', 
	"CREATED_DATE" DATE DEFAULT SYSDATE, 
	"MODIFIED_DATE" DATE DEFAULT SYSDATE, 
	 CHECK (is_active IN ('Y', 'N')) ENABLE, 
	 PRIMARY KEY ("RULE_ID");




